<!-- Hero Section -->
<section class="bg-gradient-to-r from-blue-600 to-purple-600 text-white">
  <div class="container mx-auto px-4 py-16">
    <div class="text-center">
      <h1 class="text-5xl font-bold mb-6">Welcome to BookBuddy</h1>
      <p class="text-xl mb-8 max-w-2xl mx-auto">
        Discover, track, and share your favorite books with fellow readers. 
        Join our community of book lovers today!
      </p>
      <a routerLink="/books" class="bg-white text-blue-600 hover:bg-gray-100 font-semibold py-3 px-8 rounded-lg text-lg transition duration-300">
        Browse Books
      </a>
    </div>
  </div>
</section>

<!-- User Stats or CTA Section -->
<section class="py-16 bg-white border-t border-b">
  <div class="container mx-auto px-4 text-center">
    @if (isLoggedIn()) {
      <h2 class="text-3xl font-bold mb-4 text-gray-800">Your Reading Stats üìö</h2>
      <p class="text-lg text-gray-600 mb-8">Here‚Äôs a quick overview of your activity:</p>

      <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 max-w-4xl mx-auto">
        <div class="bg-blue-50 p-6 rounded-lg shadow">
          <h3 class="text-2xl font-bold text-blue-600">12</h3>
          <p class="text-gray-700">Books Read</p>
        </div>
        <div class="bg-blue-50 p-6 rounded-lg shadow">
          <h3 class="text-2xl font-bold text-blue-600">5</h3>
          <p class="text-gray-700">Currently Reading</p>
        </div>
        <div class="bg-blue-50 p-6 rounded-lg shadow">
          <h3 class="text-2xl font-bold text-blue-600">18</h3>
          <p class="text-gray-700">Books in Wishlist</p>
        </div>
      </div>
    } @else {
      <h2 class="text-3xl font-bold mb-4 text-gray-800">Join BookBuddy Today!</h2>
      <p class="text-lg text-gray-600 mb-8">Track your reading, discover new books, and connect with fellow readers.</p>
      <div class="flex justify-center gap-4">
        <a 
          routerLink="/register"
          class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition"
        >
          Create Account
        </a>
        <a 
          routerLink="/login"
          class="bg-gray-100 text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition"
        >
          Login
        </a>
      </div>
    }
  </div>
</section>

<!-- Featured Books -->
<section class="py-16 bg-gradient-to-b from-slate-50 to-white">
  <div class="container mx-auto px-4">
    <div class="mb-10 flex items-end justify-between gap-4">
      <div>
        <h2 class="text-3xl md:text-4xl font-extrabold tracking-tight">
          <span class="bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent">
            Featured Books
          </span>
        </h2>
        <p class="text-gray-600 mt-2">Editor‚Äôs picks ‚Äî beautifully presented and ready to explore.</p>
      </div>
      <a
        routerLink="/books"
        class="hidden sm:inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-slate-900 text-white hover:bg-slate-800 transition"
      >
        Browse all
        <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707A1 1 0 018.707 5.293l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/></svg>
      </a>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-7">
      @for (book of featuredBooks(); track book.id) {
        <article
          class="group relative rounded-2xl p-[1px] bg-gradient-to-br from-blue-500/40 via-indigo-500/40 to-purple-500/40 hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition"
        >
          <div class="bg-white rounded-2xl overflow-hidden flex flex-col h-full shadow-sm hover:shadow-md transition">

            <div class="relative w-full pt-[150%] bg-slate-100 overflow-hidden">
              @if (book.imageUrl) {
                <img
                  [src]="book.imageUrl"
                  [alt]="book.title"
                  loading="lazy"
                  class="absolute inset-0 w-full h-full object-cover transform transition duration-500 group-hover:scale-[1.04]"
                />
              } @else {
                <div class="absolute inset-0 flex items-center justify-center text-slate-400 text-sm">
                  No cover
                </div>
              }

              <div class="absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-black/35 to-transparent pointer-events-none"></div>

              <div class="absolute left-3 bottom-3 flex items-center gap-2 px-2.5 py-1.5 rounded-full bg-white/90 backdrop-blur text-xs shadow">
                <div class="flex">
                  @for (s of starsParts(safeRating(book)); track $index) {
                    @if (s === 'full') {
                      <svg class="w-4 h-4 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    } @else if (s === 'half') {
                      <div class="relative w-4 h-4">
                        <svg class="absolute inset-0 w-4 h-4 text-gray-300" viewBox="0 0 20 20" fill="currentColor">
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                        <svg class="absolute inset-0 w-2 h-4 text-yellow-500 overflow-hidden" viewBox="0 0 20 20" fill="currentColor" style="clip-path: inset(0 50% 0 0);">
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                      </div>
                    } @else {
                      <svg class="w-4 h-4 text-gray-300" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    }
                  }
                </div>
                <span class="text-slate-700">
                  {{ safeRating(book) | number:'1.0-1' }}
                  @if (ratingCount(book) > 0) { <span class="text-slate-400">({{ ratingCount(book) }})</span> }
                </span>
              </div>
            </div>

            <div class="p-4 flex-1 flex flex-col">
              <h3 class="font-semibold text-slate-900 text-base line-clamp-2">{{ book.title }}</h3>
              <p class="text-sm text-slate-600 mt-1 truncate">{{ book.author }}</p>

              @if (book.genre) {
                <div class="mt-3">
                  <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700">
                    {{ book.genre }}
                  </span>
                </div>
              }

              <a
                [routerLink]="['/books/details', book.id]"
                class="mt-5 inline-flex justify-center items-center px-3 py-2 rounded-xl bg-slate-900 text-white text-sm font-medium hover:bg-slate-800 transition"
                >
                View Details
              </a>
            </div>
          </div>
        </article>
      }
    </div>
  </div>
</section>

<!-- New Arrivals Section -->
<section class="py-16 bg-white">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">New Arrivals</h2>

    @if (latestBooks().length > 0) {
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        @for (book of latestBooks(); track book.id) {
          <div class="bg-gray-100 p-4 rounded-lg text-center">
            <div class="h-48 bg-gray-300 mb-4">
              <img [src]="book.imageUrl" alt="Book Cover" class="w-full h-full object-cover rounded" />
            </div>
            <h4 class="text-lg font-semibold mb-2">{{ book.title }}</h4>
            <p class="text-gray-500 text-sm">{{ book.author }}</p>
          </div>
        }
      </div>
    } @else {
      <div class="text-center text-gray-500 italic">No new arrivals found. Check back soon!</div>
    }
  </div>
</section>

<!-- Testimonials Section -->
<section class="bg-gray-50 py-16">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">What Readers Are Saying</h2>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      <div class="bg-white p-6 rounded-lg shadow-md">
        <p class="text-gray-700 mb-4">‚ÄúBookBuddy changed the way I read books. I love sharing my progress with friends!‚Äù</p>
        <p class="text-blue-600 font-bold">‚Äî Emily R.</p>
      </div>
      <!-- Repeat testimonials -->
    </div>
  </div>
</section>
